<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Morpho & Euler: The Backbone of On-Chain Credit — Technical Deep Dive</title>
  <meta name="description" content="A technical explainer of Morpho and Euler: vault mechanics, why they supply specific markets, and how lending works end-to-end." />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=JetBrains+Mono:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../styles.css" />
  <style>
    .mono{font-family:"JetBrains Mono",ui-monospace,Menlo,Consolas,monospace}
    .kpi li{margin-bottom:6px}
    .callout{border-left:3px solid rgba(2,6,23,0.2);padding:12px 14px;background:rgba(2,6,23,0.03);border-radius:6px}
    code{font-family:"JetBrains Mono",ui-monospace,Menlo,Consolas,monospace}
  </style>
</head>
<body>
<header class="site-header">
  <div class="container nav">
    <a class="brand" href="../index.html"><span>Federico Eckert</span></a>
    <nav class="nav-links">
      <a href="../index.html#research">Research</a>
      <a href="../index.html#about">About</a>
      <a href="../index.html#contact">Contact</a>
    </nav>
  </div>
</header>

<main>
  <article class="section">
    <div class="container">
      <p><a class="btn btn-outline" href="../index.html#research">← Back to research</a></p>

      <h1>Morpho & Euler: The Backbone of On-Chain Credit</h1>
      <p class="section-lead">
        A protocol-level explainer of how Morpho and Euler actually work: from vault construction and market selection to borrower mechanics,
        interest-rate formation, collateralization, and liquidation paths.
      </p>
      <hr style="border-color:rgba(2,6,23,0.08);margin:18px 0" />
      <p><em>Published:  —  · 10–15 min</em></p>

      <!-- =========================
           MORPHO
      ========================== -->
      <h2>Morpho — Architecture & Mission</h2>
      <p>
        Morpho’s mission is to make on-chain lending <strong>more capital-efficient</strong> while preserving the security model users already trust.
        It began as the <em>Morpho Optimizer</em>, a matching layer that sits on top of Aave/Compound, then evolved into <em>Morpho Blue</em> and
        <em>MetaMorpho (Vaults)</em> to deliver isolated-market safety with curated allocation.
      </p>

      <h3>Vaults first: What they are and why they supply specific markets</h3>
      <p>
        Morpho vaults (MetaMorpho) are <strong>ERC-4626</strong> vaults that accept deposits (e.g., USDC) and allocate liquidity across a
        set of <strong>approved Morpho markets</strong>. Each vault declares:
      </p>
      <ul>
        <li><strong>Policy & risk perimeter:</strong> which markets are eligible (asset pairs, LLTV caps, oracle, liquidation params).</li>
        <li><strong>Roles & controls:</strong> <em>Owner</em> (fees/admin), <em>Curator</em> (enables/disables markets), <em>Allocator</em> (supply/withdraw scheduling).
            Parameter changes run through <strong>timelocks</strong>, letting depositors react.</li>
        <li><strong>Objective:</strong> maximize risk-adjusted APY by supplying markets with the best spread (borrow demand vs. supply rate) within policy.</li>
      </ul>
      <p class="callout">
        Why supply those markets? Because isolated markets with strong borrow demand and robust risk parameters
        (oracle quality, liquidation efficiency, conservative LLTV) produce the most sustainable lender yield per unit of risk.
      </p>

      <h3>How allocation works (Mechanics)</h3>
      <ul>
        <li>Deposits mint vault shares (1 share = claim on proportional assets).</li>
        <li>Allocator supplies liquidity across approved Morpho markets; unmatched liquidity remains idle <em>inside the vault</em> or earns base yield if routed to an integrated pool (depending on the specific vault).</li>
        <li>Interest paid by borrowers accrues to suppliers; share price in asset terms increases.</li>
        <li>Withdrawals redeem shares for assets, subject to <strong>available liquidity</strong> in the markets the vault supplies.</li>
      </ul>

      <h3>Lending side: how Morpho makes it efficient</h3>
      <p>
        In the original Optimizer model (on Aave/Compound), Morpho would <strong>match lenders and borrowers P2P</strong> whenever possible.
        If a borrower is bidding 5% and a lender is offering at 3%, Morpho matches them near the midpoint (≈4%). Everyone wins:
        borrowers pay less than pool borrow APY, lenders earn more than pool supply APY—<em>without</em> changing the underlying risk, which
        still inherits Aave/Compound liquidations and collateral logic.
      </p>
      <p>
        In Morpho Blue, markets are <strong>natively isolated</strong> (pair + oracle + LLTV + liquidation params). Vaults then allocate across these markets,
        targeting the best spreads while respecting policy.
      </p>

      <h3>Borrower mechanics on Morpho</h3>
      <ul>
        <li><strong>Open position:</strong> post whitelisted collateral asset; borrow quote asset in that market.</li>
        <li><strong>Health & LLTV:</strong> each market sets a <em>loan-to-value cap</em> and liquidation threshold.</li>
        <li><strong>Interest formation:</strong> per-market interest curves (utilization-based) define supply/borrow rates; if matched P2P (in Optimizer), borrower rate improves.</li>
        <li><strong>Liquidation:</strong> if health falls below threshold, keepers/liquidators repay debt and seize discounted collateral per market rules.</li>
      </ul>

      <!-- =========================
           EULER
      ========================== -->
      <h2>Euler — Architecture & Mission</h2>
      <p>
        Euler’s mission is to make credit <strong>permissionless and modular</strong> while strictly <strong>isolating risk</strong>.
        Rather than one giant pool, Euler lets markets be created per asset pair with their own parameters. In V2 (EVK/EVC),
        vaults are the unit of credit and can be composed into a <em>credit graph</em>.
      </p>

      <h3>Vaults first: EVK vaults and why they supply markets</h3>
      <p>
        Euler V2 introduces the <strong>Euler Vault Kit (EVK)</strong> to deploy ERC-4626 lending vaults. There are two roles at the vault level:
      </p>
      <ul>
        <li><strong>Liability vaults:</strong> where lenders deposit and borrowers draw the asset.</li>
        <li><strong>Collateral vaults:</strong> assets posted as collateral to back borrows.</li>
      </ul>
      <p>
        A liability vault explicitly <strong>whitelists</strong> which collateral vaults it accepts. Why supply these markets?
        Because the liability vault’s <em>interest curve</em>, <em>oracle choice</em>, and <em>collateral whitelist</em> together define a risk/return profile
        that can be tuned (conservative core markets vs. experimental long-tail). Vault creators compete on risk engineering.
      </p>

      <h3>How allocation works (Mechanics)</h3>
      <ul>
        <li>Lenders deposit into a liability vault → receive vault shares.</li>
        <li>The vault accrues interest from borrowers; share value increases.</li>
        <li>Withdrawals depend on utilization: if most funds are lent, lenders may wait for repayments or pay an exit fee (if configured).</li>
      </ul>

      <h3>Lending side: borrower mechanics on Euler</h3>
      <ul>
        <li><strong>Deposit collateral</strong> into one or more collateral vaults (e.g., ETH).</li>
        <li><strong>Borrow</strong> from a liability vault that explicitly accepts your collateral vault(s).</li>
        <li><strong>Interest rate formation:</strong> smooth utilization-based curve, commonly parameterized as
            <span class="mono">r_b(U) = a + b·U^k</span> where <span class="mono">U</span> is utilization and <span class="mono">a,b,k</span> are curve parameters.
            This avoids hard “kinks” and reduces liquidity crunches under stress.</li>
        <li><strong>Health & liquidations:</strong> vault-level LTV & liquidation penalties; liquidators repay debt and seize collateral per vault config.</li>
      </ul>

      <!-- =========================
           RISKS → WHY SUPPLY / WHY BORROW
      ========================== -->
      <h2>Why these vaults work (and what can break)</h2>
      <p class="callout">
        <strong>Why it works:</strong> Vaults aggregate passive liquidity behind clear policy. Curated (Morpho) or permissionless (Euler) market selection
        routes capital to where <em>borrow demand</em> and <em>risk controls</em> make the spread most sustainable.
      </p>
      <ul>
        <li><strong>Rate modeling:</strong> utilization-based curves adjust smoothly to balance supply and demand.</li>
        <li><strong>Risk boundaries:</strong> Morpho Blue/Euler vaults isolate markets so a failure does not contaminate others.</li>
        <li><strong>Composability:</strong> ERC-4626 shares make deposits portable across DeFi, enabling secondary strategies.</li>
      </ul>
      <p><strong>What can break:</strong></p>
      <ul>
        <li><strong>Oracle/price risk:</strong> bad feeds or thin liquidations can cause bad debt.</li>
        <li><strong>Liquidity/withdraw risk:</strong> high utilization delays withdrawals until repayments arrive.</li>
        <li><strong>Configuration risk:</strong> weak collateral whitelists (Euler) or risky market inclusion (Morpho) elevate lender risk.</li>
        <li><strong>Operational risk:</strong> allocator/curator error (Morpho) or poorly tuned interest curves (Euler).</li>
        <li><strong>Contract risk:</strong> standard smart-contract & governance risks.</li>
      </ul>

      <!-- =========================
           USER FLOWS
      ========================== -->
      <h2>End-to-end user flows</h2>

      <h3>Morpho — Lender Vault Roadmap</h3>
      <ol>
        <li><strong>Select vault:</strong> read policy (approved markets, oracle, LLTVs), roles (Owner/Curator/Allocator), fees, timelocks.</li>
        <li><strong>Deposit asset:</strong> receive ERC-4626 shares.</li>
        <li><strong>Allocation:</strong> funds supplied across eligible Morpho markets; APY derives from borrower interest in those markets.</li>
        <li><strong>Monitor:</strong> utilization, market mix, queued policy changes (timelock), oracle/liquidation performance.</li>
        <li><strong>Withdraw:</strong> redeem shares subject to available liquidity; large exits may be scheduled.</li>
      </ol>

      <h3>Morpho — Borrower Roadmap</h3>
      <ol>
        <li><strong>Pick market:</strong> choose collateral/borrow pair with desired LLTV and oracle.</li>
        <li><strong>Post collateral</strong> → <strong>borrow</strong> quote asset.</li>
        <li><strong>Maintain health:</strong> manage LTV; if Optimizer matching occurs, benefit from a lower effective borrow rate.</li>
        <li><strong>Close/repay</strong> to unlock collateral.</li>
      </ol>

      <h3>Euler — Lender Vault Roadmap</h3>
      <ol>
        <li><strong>Choose liability vault:</strong> read its curve params (<span class="mono">a,b,k</span>), oracle, accepted collateral vaults, and penalties.</li>
        <li><strong>Deposit asset:</strong> receive vault shares; start accruing borrower interest.</li>
        <li><strong>Monitor:</strong> utilization (withdraw risk), borrow demand, collateral composition of active loans.</li>
        <li><strong>Withdraw:</strong> redeem when liquidity frees up; some vaults can define exit mechanisms/fees.</li>
      </ol>

      <h3>Euler — Borrower Roadmap</h3>
      <ol>
        <li><strong>Deposit collateral</strong> into one or more collateral vaults.</li>
        <li><strong>Borrow</strong> from a liability vault that whitelists those collateral vaults.</li>
        <li><strong>Manage health:</strong> watch price/volatility; liquidation rules are per-vault.</li>
        <li><strong>Repay</strong> to release collateral.</li>
      </ol>

      <!-- =========================
           COMPARISON + KPIs
      ========================== -->
      <h2>Comparison (at the protocol level)</h2>
      <table style="width:100%;border-collapse:collapse">
        <thead>
          <tr>
            <th style="text-align:left;padding:8px;border-bottom:1px solid rgba(2,6,23,0.12)">Aspect</th>
            <th style="text-align:left;padding:8px;border-bottom:1px solid rgba(2,6,23,0.12)">Morpho</th>
            <th style="text-align:left;padding:8px;border-bottom:1px solid rgba(2,6,23,0.12)">Euler</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td style="padding:8px">Mission</td>
            <td style="padding:8px">Pareto-improve lending efficiency; curated allocation across isolated markets.</td>
            <td style="padding:8px">Permissionless, modular credit with strong isolation to limit contagion.</td>
          </tr>
          <tr>
            <td style="padding:8px">Vault role</td>
            <td style="padding:8px">Aggregates deposits → supplies approved markets per policy (Owner/Curator/Allocator + timelocks).</td>
            <td style="padding:8px">ERC-4626 liability vaults with explicit collateral whitelists; configurable curves/oracles.</td>
          </tr>
          <tr>
            <td style="padding:8px">Interest formation</td>
            <td style="padding:8px">Utilization-based; P2P matching (Optimizer) can improve borrower/supplier rates.</td>
            <td style="padding:8px">Smooth utilization curve r(U)=a+b·U^k; avoids hard kinks and crunches.</td>
          </tr>
          <tr>
            <td style="padding:8px">Risk boundary</td>
            <td style="padding:8px">Per-market isolation (Morpho Blue); inherits oracle/liquidation config.</td>
            <td style="padding:8px">Strict vault/market isolation; liability vault chooses which collateral vaults it accepts.</td>
          </tr>
          <tr>
            <td style="padding:8px">Primary edge</td>
            <td style="padding:8px">Higher lender APY / lower borrower cost via matching + curation.</td>
            <td style="padding:8px">Long-tail assets and custom credit design without system-wide contagion.</td>
          </tr>
        </tbody>
      </table>

      <h2>What to monitor (technically meaningful KPIs)</h2>
      <ul class="kpi">
        <li><strong>Vault utilization</strong> (per market / per vault): withdrawal risk and rate pressure.</li>
        <li><strong>Borrow demand vs. supply APY</strong>: spread sustainability; does allocation follow the best risk-adjusted markets?</li>
        <li><strong>Oracle/liquidation performance</strong>: bad debt incidence, auction efficiency.</li>
        <li><strong>Policy changes</strong> (Morpho timelocks) / <strong>whitelist changes</strong> (Euler): shifting risk perimeter.</li>
        <li><strong>Curve parameters</strong> (Euler a,b,k): aggressiveness of rate response under stress.</li>
      </ul>

      <p style="margin-top:28px">
        <a class="btn btn-outline" href="../index.html#research">← Back to research</a>
      </p>
    </div>
  </article>
</main>

<footer class="site-footer">
  <div class="container"><small>© <span id="year"></span> Federico Eckert</small></div>
</footer>

<script>document.getElementById('year').textContent = new Date().getFullYear();</script>
</body>
</html>
